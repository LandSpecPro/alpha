<%- title "Manage Company Info | LandSpec Pro" %>
<%= render 'layouts/sidebar' %>

<div class="row">
	<div class="col-lg-4 col-lg-offset-1 col-xs-12">
		<%= form_for @bus_vendor, :html => {:id => 'form_update_logo'}, :url => {:action => :update} do |f| %>
			<%= f.hidden_field :id, :value => @bus_vendor.id %>
			<div class="widget-box" style="min-width: 350px;">
				<div class="widget-header header-color-green2">
					<h5 class="bigger lighter"><i class="icon-briefcase"></i> Company Information</h5>
				</div>

				<div class="widget-body">
					<div class="widget-main">

						<!-- Display error messages as alerts -->
						<% @bus_vendor.errors.each do |field, msg| %>
							<div class="alert alert-danger">
							  <button type="button" class="close" data-dismiss="alert"><i class="icon-remove"></i></button>
							  <strong>Error! </strong> <%= msg %>
							</div>
						<% end %>

						<div class="row">
							<div class="col-xs-12">
								<div class="center">
									<ul class="ace-thumbnails">
										<li>
											<div style="max-height: 100px; min-width: 100px;">
												<%= image_tag @bus_vendor.logo.url(:thumb) %>

												<% unless @bus_vendor.logo_file_name.blank? %>
													<div class="text">
														<div class="inner">
															<a href="<%= @bus_vendor.logo.url(:original) %>" data-rel="colorbox" title="Company Logo">
																<i class="icon-zoom-in" title="View Larger"></i><br/>
																View Larger
															</a>
														</div>
													</div>
												<% end %>

											</div>
										</li>
									</ul>
								</div>
							</div>
						</div>

						<br/><br/>

						<div id="updateCompanyInfoProgress" class="progress progress-striped active hide" data-percent="Updating please wait...">
							<div class="progress-bar progress-bar-success" style="width:100%;"></div>
						</div>

						<fieldset>

							<div class="form-group">
								<%= f.file_field :logo %>
							</div>

							<div class="form-group">
								<%= f.label 'Company Name:' %>
								<div class="block input-icon input-icon-right">
									<%= f.text_field :busName, :class => 'form-control', :value => @bus_vendor.busName %>
								</div>
							</div>

							<div class="form-group">
								<%= f.label 'Company Tagline:' %>
								<div class="block input-icon input-icon-right">
									<%= f.text_field :tagline, :class => 'form-control', :value => @bus_vendor.tagline %>
								</div>
							</div>

							<div class="form-group">
								<%= f.label 'Phone:' %> <!-- Add in something that says this is not visible to other users -->
								<div class="block input-icon input-icon-right">
									<%= f.text_field :busPhone, :class => 'form-control input-mask-phone popover-phone', :value => @bus_vendor.busPhone %>
								</div>
							</div>

						</fieldset>

					</div>
				</div>

				<div class="widget-footer">
					<div class="row">
						<div class="col-xs-12">
							<button class="btn btn-block btn-sm btn-success" type="submit" onclick="updateCompanyInformation();"><i  class="icon-save" id="fav_icon"></i> Update</button>
						</div>
					</div>
				</div>

			</div>
		<% end %>
	</div>

</div>

<%= render 'layouts/sidebarend' %>

<script type="text/javascript">

	$(applyChosenStyle());
	$(applyMasks());
	$(applyPopovers());
	$(applyColorbox());

	function updateCompanyInformation(){
		// Show progres bar
		$( "#updateCompanyInfoProgress" ).removeClass('hide');
		
	}

	$('#ace-file-upload').ace_file_input({
      no_file:'Upload New Company Logo',
      btn_choose:'Choose',
      btn_change:'Change',
      icon_remove:null,
      droppable:false,
      thumbnail:false
    });

	// Success messages
	<% if @update_company_info_success %>
		$(showUpdateSuccessGritter('Company Information has been updated.'));
	<% end %>

</script>