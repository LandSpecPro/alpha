<%= render 'layouts/sidebar' %>

	<div class="span4 offset1">
		<%= form_for @location do |f| %>
		<div class="widget-box">
			<div class="widget-header header-color-blue">
				<h5 class="bigger lighter"><i class="icon-globe"></i> Location Address</h5>
				<div class="widget-toolbar">
					<button type="submit" class="btn btn-mini btn-inverse no-radius white"><i class="icon-save"></i> Update</button>
				</div>
			</div>

			<div class="widget-body">

				<div class="widget-main">

					<!-- Display error messages as alerts -->
					<% @location.errors.full_messages.each do |msg| %>
						<div class="alert alert-error">
						  <button type="button" class="close" data-dismiss="alert">&times;</button>
						  <strong>Error! </strong> <%= msg %>
						</div>
					<% end %>

					<fieldset>

						<%= f.hidden_field :id, :value => @location.id %>

						Location Name: 
						<div class="block input-icon input-icon-right">
							<%= f.text_field :locName, :class => 'span12', :value => @location.locName %>
						</div>

						Street 1:
						<div class="block input-icon input-icon-right">
							<%= f.text_field :address1, :class => 'span12', :value => @location.address1 %>
						</div>

						Street 2:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :address2, :class => 'span12', :value => @location.address2 %>
						</span>

						City:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :city, :class => 'span12', :value => @location.city %>
						</span>

						State:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :state, :class => 'span12', :value => @location.state %>
						</span>		

						Zip Code:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :zip, :class => 'span12', :value => @location.zip %>
						</span>		

						Website:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :websiteLink, :class => 'span12', :value => @location.websiteLink %>
						</span>			

					</fieldset>

				</div>

			</div>
		</div>
		<% end %>
	</div>

	<div class="span4">
		<%= form_for @location do |f| %>
		<div class="widget-box">
			<div class="widget-header header-color-blue">
				<h5 class="bigger lighter"><i class="icon-globe"></i> Location Info</h5>
				<div class="widget-toolbar">
					<button type="submit" class="btn btn-mini btn-inverse no-radius white"><i class="icon-save"></i> Update</button>
				</div>
			</div>

			<div class="widget-body">

				<div class="widget-main">

					<!-- Display error messages as alerts -->
					<% @location.errors.full_messages.each do |msg| %>
						<div class="alert alert-error">
						  <button type="button" class="close" data-dismiss="alert">&times;</button>
						  <strong>Error! </strong> <%= msg %>
						</div>
					<% end %>

					<fieldset>

						<%= f.hidden_field :id, :value => @location.id %>

						Primary Phone: 
						<div class="block input-icon input-icon-right">
							<%= f.text_field :primaryPhone, :class => 'span12', :value => @location.primaryPhone %>
						</div>

						Secondary Phone:
						<div class="block input-icon input-icon-right">
							<%= f.text_field :secondaryPhone, :class => 'span12', :value => @location.secondaryPhone %>
						</div>

						Fax:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :fax, :class => 'span12', :value => @location.fax %>
						</span>

						Primary Email:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :primaryEmail, :class => 'span12', :value => @location.primaryEmail %>
						</span>

						Secondary Email:
						<span class="block input-icon input-icon-right">
							<%= f.text_field :secondaryEmail, :class => 'span12', :value => @location.secondaryEmail %>
						</span>

						<div class="row-fluid">
							<div class="span6">

								Facebook Link:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :facebookLink, :class => 'span12', :value => @location.facebookLink %>
								</span>		
							</div>
							<div class="span6">

								Twitter Link:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :twitterLink, :class => 'span12', :value => @location.twitterLink %>
								</span>	
							</div>	

						</div>		
						<div class="row-fluid">
							<div class="span6 offset3">
								Google+:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :googleLink, :class => 'span12', :value => @location.googleLink %>
								</span>
							</div>
						</div>	

					</fieldset>

				</div>

			</div>
		</div>
		<% end %>
	</div>

	<div class="row-fluid">

		<div class="span6 offset2">

			<% if @location.featured_items.count < 3 %>

				<% if @location.featured_items.count == 0 %>
					<div class="center">
						<h4>You have no featured items for this location. You can add up to 3. For more information, add link here.</h4><br/>
					</div>
				<% end %>

				<div class="row-fluid">
					<div class="span12">
						<%= form_for :product do |f| %>
							<div class="widget-box">
								<div class="widget-header header-color-blue">
									<h5 class="bigger lighter"><i class="icon-plus"></i> Add Featured Item</h5>
									<div class="widget-toolbar">
										<button type="submit" class="btn btn-mini btn-inverse no-radius white"><i class="icon-save"></i> Add</button>
									</div>
								</div>

								<div class="widget-body">

									<div class="widget-main">

										<fieldset>

											<%= f.hidden_field(:location_id, :value => @location.id) %>

											<div class="row-fluid">
												<div class="span6">
													Common Name: 
													<span class="block input-icon input-icon-right">
														<%= f.text_field :commonName, :class => 'span12' %>
													</span>
												</div>
											
												<div class="span6">
													Alternate Name (optional): 
													<span class="block input-icon input-icon-right">
														<%= f.text_field :altName, :class => 'span12' %>
													</span>
												</div>
											</div>

											<div class="row-fluid">
												<div class="span6">
													Latin Name (optional): 
													<div class="block input-icon input-icon-right">
														<%= f.text_field :latinName, :class => 'span12' %>
													</div>
												</div>
												<div class="span6">
													<%= f.fields_for :featured_items do |f2| %>

														Description: 
														<div class="block input-icon input-icon-right">
															<%= f2.text_field :description, :class => 'span12' %>
														</div>

													<% end %>
												</div>
											</div>

											<%= f.fields_for :product_images do |f3| %>

												Image: 
												<div class="block input-icon input-icon-right">
													<%= f3.file_field :image, :class => 'span12' %>
												</div>
												
											<% end %>

										</fieldset>

									</div>
								</div>
							</div>
						<% end %>
					</div>
				</div>

			<% end %>
		</div>

		<div class="row-fluid">
			<div class="span10 offset1">

				<% if @location.featured_items.count != 0 %>
					<div class="row-fluid">
						<h1>Featured Items:</h1>
						<% @location.featured_items.each do |fi| %>

							
							<div class="span3">
								<div class="widget-box">
									<div class="widget-header header-color-blue">
										<h5 class="bigger lighter"><i class="icon-star"></i> <%= fi.get_product.commonName %></h5>
										<div class="widget-toolbar">
											<a href='#' title="Update">
												<span class="badge badge-success"><i class="icon-save"></i></span>
											</a>
											<a href=<%= locations_featureditem_delete_url(:featured_item_id => fi.id, :location_id => fi.location_id) %> title="Delete">
												<span title='Delete' class="badge badge-important"><i class="icon-trash"></i></span>
											</a>
										</div>
									</div>
									<div class="widget-body">

										<div class="widget-main">
											<div class="center">
												<%= image_tag fi.get_image.url(:thumb) %>
											</div>
											<div>
												<h4>Description:</h4>
												<%= fi.description %>
											</div>
										</div>
									</div>

									

								</div>
							</div>


							

						<% end %>
					</div>
				<% end %>
			</div>
		</div>

	</div>

<%= render 'layouts/sidebarend' %>