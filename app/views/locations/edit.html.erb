<%= render 'layouts/sidebar' %>

	<div class="row-fluid">

		<div class="span4">
			
			<%= render 'formeditfeatureditem' %>

		</div>

		<div class="span4">

			<%= render 'formaddfeatureditem' %>
			<%= render 'formupdatecategories' %>

		</div>


		<div class="span4">
			<%= form_for @location, :html => {:id => 'form_location_address'} do |f| %>
				<div class="widget-box">
					<div class="widget-header header-color-blue">
						<h5 class="bigger lighter"><i class="icon-globe"></i> Location Address</h5>
						<div class="widget-toolbar">
							<a href="javascript:{return true;}" onclick="document.getElementById('form_location_address').submit();" class="white" id="white-link"><i  class="icon-save" id="fav_icon"></i> Update</a>
						</div>
					</div>

					<div class="widget-body">

						<div class="widget-main">

							<!-- Display error messages as alerts -->
							<% @location.errors.full_messages.each do |msg| %>
								<div class="alert alert-error">
								  <button type="button" class="close" data-dismiss="alert">&times;</button>
								  <strong>Error! </strong> <%= msg %>
								</div>
							<% end %>

							<fieldset>

								<%= f.hidden_field :id, :value => @location.id %>

								Location Name: 
								<div class="block input-icon input-icon-right">
									<%= f.text_field :locName, :class => 'span12', :value => @location.locName %>
								</div>

								Street 1:
								<div class="block input-icon input-icon-right">
									<%= f.text_field :address1, :class => 'span12', :value => @location.address1 %>
								</div>

								Street 2:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :address2, :class => 'span12', :value => @location.address2 %>
								</span>

								City:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :city, :class => 'span12', :value => @location.city %>
								</span>

								<div class="row-fluid">
									<div class="span4">
										State:
										<div class="block input-icon input-icon-right">
											<%= f.select(:state, get_states, {}, {:class => 'span10 chzn-select'}) %>
										</div>
									</div>
									<div class="offset3 span5">
										Zip Code:
										<span class="block input-icon input-icon-right">
											<%= f.text_field :zip, :class => 'span12', :value => @location.zip %>
										</span>	
									</div>
								</div>

								<%= f.hidden_field :id, :value => @location.id %>

								Primary Phone: 
								<div class="block input-icon input-icon-right">
									<%= f.text_field :primaryPhone, :class => 'span12', :value => @location.primaryPhone %>
								</div>

								Secondary Phone:
								<div class="block input-icon input-icon-right">
									<%= f.text_field :secondaryPhone, :class => 'span12', :value => @location.secondaryPhone %>
								</div>

								Fax:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :fax, :class => 'span12', :value => @location.fax %>
								</span>

								Primary Email:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :primaryEmail, :class => 'span12', :value => @location.primaryEmail %>
								</span>

								Secondary Email:
								<span class="block input-icon input-icon-right">
									<%= f.text_field :secondaryEmail, :class => 'span12', :value => @location.secondaryEmail %>
								</span>

								<div class="row-fluid">
									<div class="span6">
										Website:
										<span class="block input-icon input-icon-right">
											<%= f.text_field :websiteLink, :class => 'span12', :value => @location.websiteLink %>
										</span>	
									</div>
									<div class="span6">
										Facebook Link:
										<span class="block input-icon input-icon-right">
											<%= f.text_field :facebookLink, :class => 'span12', :value => @location.facebookLink %>
										</span>	
									</div>	

								</div>		
								<div class="row-fluid">
									<div class="span6">
										Twitter Link:
										<span class="block input-icon input-icon-right">
											<%= f.text_field :twitterLink, :class => 'span12', :value => @location.twitterLink %>
										</span>	
									</div>
									<div class="span6">
										Google+:
										<span class="block input-icon input-icon-right">
											<%= f.text_field :googleLink, :class => 'span12', :value => @location.googleLink %>
										</span>
									</div>
								</div>	

							</fieldset>

						</div>

					</div>
				</div>
			<% end %>
		</div>

	</div>

	<div class="row-fluid">

		

		<div class="row-fluid">
			<div class="span10 offset1">

				
			</div>
		</div>

	</div>

<%= render 'layouts/sidebarend' %>

<script type="text/javascript">

	$(document).ready(chosenf())

	function chosenf(){
	  $(".chzn-select").chosen();

	  bindInput();
	  applyColorbox();
	  //fileInput();
	}

	function bindInput(){
		$('#productSelect').change(function(){
			if($(this).val() != 'New Product'){

				//var p = document.getElementById("productSelect");
				//var common_name = p.options[p.selectedIndex].dataset["comname"];
				//var latin_name = p.options[p.selectedIndex].dataset["latname"];

				$('#commonName').val($(this).val());
				$('#commonName').attr('readonly', true);
			}
			else{
				$('#commonName').val('');
				$('#commonName').attr('readonly', false);
				$(this).blur();
				$('#commonName').focus();
			}
		})
	}

	function applyColorbox() {

		var colorbox_params = {
			reposition:true,
			scalePhotos:true,
			scrolling:false,
			previous:'<i class="icon-arrow-left"></i>',
			next:'<i class="icon-arrow-right"></i>',
			close:'&times;',
			current:'{current} of {total}',
			maxWidth:'100%',
			maxHeight:'100%',
			onOpen:function(){
				document.body.style.overflow = 'hidden';
			},
			onClosed:function(){
				document.body.style.overflow = 'auto';
			},
			onComplete:function(){
				$.colorbox.resize();
			}
		};

		$('[data-rel="colorbox"]').colorbox(colorbox_params);

		$(window).on('resize.colorbox', function() {
			try {
				$.fn.colorbox.load();//to redraw the current frame
			} catch(e){}
		});
	}
/*
	function fileInput(){
		$('#image').ace_file_input({
				no_file:'No File ...',
				btn_choose:'Choose',
				droppable:false,
				onchange:null,
				thumbnail:false
			}).on('change', function(){
				var files = $(this).data('ace_input_files');
				update_file_text(files);
			});
	}

	function update_file_text(files){
		$('#image').text = files.value;
	}
*/

</script>