<%= form_for @user, :html => {:id => 'form_update_account_info'} do |f| %>
	<div class="widget-box" style="min-width: 350px;">
		<div class="widget-header header-color-green2">
			<h5 class="bigger lighter"><i class="icon-cog"></i> Account Info</h5>
		</div>

		<div class="widget-body">
			<div class="widget-main">


				<!-- Display error messages as alerts -->
				<% @user.errors.each do |field, msg| %>
					<div class="alert alert-error">
					  <button type="button" class="close" data-dismiss="alert">&times;</button>
					  <strong>Error! </strong> <%= msg %>
					</div>
				<% end %>

				<div id="updateAccountInfoProgress" class="progress progress-success progress-striped active hide" data-percent="Updating please wait...">
					<div class="bar" style="width:100%;"></div>
				</div>

				<fieldset>

					<%= f.hidden_field :id, :value => @user.id %>

					<%= f.label 'Username:' %>
					<div class="block input-icon input-icon-right">
						<%= f.text_field :login, :class => 'span12', :value => @user.login %>
					</div>

					<%= f.label 'Email:' %>
					<div class="block input-icon input-icon-right">
						<%= f.text_field :email, :class => 'span12', :value => @user.email %>
					</div>

					<%= f.label 'User Type:' %>
					<span class="block input-icon input-icon-right">
						<% if @usertype == 'Vendor' %>
							<%= f.text_field :userType, :class => 'span12', :value => 'Supplier', :readonly => true %>
						<% else %>
							<%= f.text_field :userType, :class => 'span12', :value => @usertype, :readonly => true %>
						<% end %>
					</span>
					<div class="pull-right">
						<a href=<%= password_reset_url %>>Reset Password</a>
					</div>

				</fieldset>


			</div> <!-- end widget-main -->
		</div> <!-- end widget-body -->

		<div class="widget-footer">
			<div class="row-fluid">
				<div class="span12">
					<button class="btn btn-block btn-small btn-success" type="submit" onclick="updateAccountInfo();"><i  class="icon-save" id="fav_icon"></i> Update</button>
				</div>
			</div>
		</div>

	</div> <!-- end widget-box -->
<% end %>

<script type="text/javascript">

	$(applyChosenStyle());
	$(applyMasks());

	function updateAccountInfo(){

		// Show progres bar
		$( "#updateAccountInfoProgress" ).show();
		
	}

	// Success messages
	<% if params[:update_account_info_success] %>
		$(showUpdateSuccessGritter('Your Account Information has been updated.'));
	<% elsif params[:password_update_success] %>
		$(showUpdateSuccessGritter('Your Password has been updated.'));
	<% end %>

</script>