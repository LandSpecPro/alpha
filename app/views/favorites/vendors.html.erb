<%= render 'layouts/sidebar' %>

	<!--[if lt IE 10]> <div style="font-size:15px;"><![endif]-->
	<div class="span8 offset1">
		<div class="table-header header-color-green2">
			You have <%= @favlocations.count %> Favorite Suppliers
		</div>

		<table id="table_report" class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th class="center hidden-phone">Logo</th>
					<th class="center">Company</th>
					<th class="center">Address</th>
					<th class="center">Distance Away (miles)</th>
					<th class="center">Favorite</th>
				</tr>
			</thead>
									
			<tbody>

				<% @favlocations.each do |l| %>

					<% l = l.location %>
				
					<tr>
						<td class="center hidden-phone">
							<a href="<%= locations_view_url(:id => l.id) %>" title="<%= l.busName %>">
								<%= image_tag l.bus_vendor.logo.url(:smthumb), :title => l.busName, :width => '50px', :height => '50px' %>
							</a>
						</td>
						<td class="center">
							<a href=<%= locations_view_url(:id => l.id) %> title="View Profile">
								<%= BusVendor.find(l.bus_vendor_id).busName %>
							</a>
						</td>
						<td class='center'>
							<%= link_to l.get_full_address, get_map_link_from_address(concat_address(l)), :target => "_blank", :title => "View on Map" %>
						</td>
						<td class='center'>
							<%= "%8.1f" % l.distance_from(current_user.currentCity + ", " + current_user.currentState) %>
						</td>
						<td class="center">
							<% if l.is_favorited(current_user) %>
								<a title="Remove from favorites" href=<%= locations_favorite_set_url(:id => l.id) %>><i  class="icon-bookmark" id="fav_icon"></i></a>
							<% else %>
								<a title="Add to favorites"  href=<%= locations_favorite_set_url(:id => l.id) %>><i  class="icon-bookmark-empty" id="fav_icon"></i></a>
							<% end %>
						</td>
					</tr>

				<% end %>

			</tbody>

		</table>
	</div>
	<!--[if lt IE 10]> </div><![endif]-->
<%= render 'layouts/sidebarend' %>

<script type="text/javascript">

	$('#table_report').dataTable( {
		"aoColumns": [
			{"bSortable": false, "bSearchable": false},
			{"bSortable": true},
			{"bSortable": true},
			{"bSortable": true, "sType": "numeric", "bSearchable": false, "sDefaultContent": "?"},
			{"bSortable": false, "bSearchable": false}
		]
	});

</script>